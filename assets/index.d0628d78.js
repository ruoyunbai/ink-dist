import{d as p,b as g,r as e,c as v,t as x,e as y,o as b,f as s,h as N,k as d,n as S}from"./index.f1022d15.js";const E=d("br",null,null,-1),J=["width","height","src"],w=p({setup(O){g(),e("");const r=v();e(!0),e(!0),e(!0),e(!1),e("\u9009\u62E9\u539F\u578B\u540E\u53EF\u9009\u62E9\u9875\u9762"),e(!1);const c=e("https://embed.diagrams.net/?embed=1&proto=json&spin=1&libraries=1"),n=e(),f=e(-1),u=e(-1),m=e(null),_=x();e([]),e([]),e(),e();let l="";const h=()=>{window.addEventListener("message",t=>{console.log(t),JSON.parse(t.data).event=="init"&&(console.log("event:init"),n!=null&&(console.log(n.value),n.value.contentWindow.postMessage(JSON.stringify({action:"load",xml:l}),"*"))),JSON.parse(t.data).event=="save"&&(console.log("event:save"),console.log(JSON.parse(t.data).xml),s({url:s.defaults.baseURL+"/uml/upload_uml",method:"post",headers:{"Content-Type":"application/json",Authorization:r.token},data:{uml_id:1,uml_data:JSON.parse(t.data).xml},transformRequest:[function(a,o){return JSON.stringify(a)}]}).then(function(a){var o;console.log("response",a),console.log(a.data),(o=a.data)!=null&&o.success})),JSON.parse(t.data).event=="exit"&&(console.log("event:exit"),_.push({name:"projectDetail"}))})};return y(()=>{u.value=2e3,console.log(document.body.clientWidth)}),b(()=>{s({url:s.defaults.baseURL+"/uml/get_uml_by_id",method:"post",headers:{"Content-Type":"application/json",Authorization:r.token},data:{uml_id:1},transformRequest:[function(t,a){return JSON.stringify(t)}]}).then(function(t){var a,o,i;console.log("response",t),console.log(t.data),(a=t.data)!=null&&a.success&&(console.log((o=t.data)==null?void 0:o.uml.uml_data),l=(i=t.data)==null?void 0:i.uml.uml_data,console.log(l))})}),(t,a)=>(S(),N("div",{ref_key:"root",ref:m},[E,d("iframe",{ref_key:"ifr",ref:n,id:"inlineFrameExample",title:"Inline Frame Example",width:f.value,height:u.value,class:"ifra",src:c.value,onLoad:h},`\r
`,40,J)],512))}});export{w as default};
