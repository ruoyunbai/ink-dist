import{_ as $,d as ee,G as oe,u as te,t as ae,b as ue,a as ne,c as le,r as s,v as se,e as de,o as ce,f as v,g as p,h as ie,i as o,j as u,k as P,p as re,m as pe,n as _e,q as k}from"./index.ffbff924.js";import{u as ve}from"./Project.0e501805.js";const V=y=>(re("data-v-17d8c1cf"),y=y(),pe(),y),fe=k(" \u53D6\u6D88 "),me=k("\u786E\u5B9A"),ge=V(()=>P("div",{style:{"font-family":"'Roboto'","font-style":"normal","font-weight":"700","font-size":"32px","line-height":"34px",color:"#000000"}},"\u591A\u4EBA\u6587\u6863",-1)),he=k("\u65B0\u5EFA\u6587\u6863"),je=V(()=>P("br",null,null,-1)),be=ee({setup(y){const A=oe(),g=ve(),J=te(),L=ae(),F=ue(),z=ne(),C=le(),i=s([]),h=s(""),G=[{label:"\u4F1A\u8BAE\u7EAA\u8981",value:"\u4F1A\u8BAE\u7EAA\u8981"},{label:"\u9879\u76EE\u89C4\u5212",value:"\u9879\u76EE\u89C4\u5212"},{label:"\u9700\u6C42\u6587\u6863",value:"\u9700\u6C42\u6587\u6863"}],S=s(null),U=s([]),O=s([]);s(!1),s(-1);const j=s(null),N=s(),b=s(!0),x=s(!1),H=s(!1),K=s(!1);U.value.push({label:"word",value:1}),U.value.push({label:"pdf",value:2});const Q=()=>{console.log(h.value),Number(h.value)==1?A.Dopt="word":A.Dopt="pdf",h.value="\u5BFC\u51FA\u6587\u6863"},W=()=>{A.DMname=String(S.value),A.Dopt="load"},_=se({id:-1,name:""}),X=()=>{g.proj_id=N.value,console.log("IDDDD",g.proj_id),R()},Y=()=>{v({url:v.defaults.baseURL+"/doc/create_document",method:"post",headers:{"Content-Type":"application/json",Authorization:C.token},data:{document_name:M.value,proj_id:g.proj_id},transformRequest:[function(t,e){return JSON.stringify(t)}]}).then(function(t){var e,n,d;console.log("response",t),console.log(t.data),x.value=!1,(e=t.data)!=null&&e.success?(F.success((n=t.data)==null?void 0:n.message),R(!0)):F.error((d=t.data)==null?void 0:d.message)})},q=()=>{_.id=Number(j.value),console.log("docid",_.id);for(let t=0;t<i.value.length;t++)j.value==i.value[t].value&&(console.log("LABEL",i.value[t].label),_.name=String(i.value[t].label));J.name==="docContent"?L.push({name:"docContent0",params:_}):L.push({name:"docContent",params:_})},Z=()=>{v({url:v.defaults.baseURL+"/doc/upload_document",method:"post",headers:{"Content-Type":"application/json",Authorization:C.token},data:{content:"",document_name:_.name,proj_id:1,document_id:_.id},transformRequest:[function(t,e){return JSON.stringify(t)}]}).then(function(t){var e;console.log("response",t),console.log(t.data),(e=t.data)!=null&&e.success})};de(()=>{}),ce(()=>{g.proj_id==-1?I(!0):(I(!1),R())});const I=(t=!1)=>{b.value=!0,z.id,v({url:v.defaults.baseURL+"/proj/get_proj_all",method:"post",headers:{"Content-Type":"application/json",Authorization:C.token},data:{group_id:z.id,is_desc:!0,order_by:0},transformRequest:[function(e,n){return JSON.stringify(e)}]}).then(function(e){var n,d,f,a,m,r;for(console.log("response",e),console.log(e.data);i.value.length!=0;)i.value.pop();if((n=e.data)!=null&&n.success){for(let c=0;c<((d=e.data)==null?void 0:d.count);c++)O.value.push({label:(a=(f=e.data)==null?void 0:f.projs[c])==null?void 0:a.proj_name,value:(r=(m=e.data)==null?void 0:m.projs[c])==null?void 0:r.proj_id});b.value=!1}else F.error("\u8FD8\u6CA1\u6709\u9879\u76EE")})},R=(t=!1)=>{b.value=!1,v({url:v.defaults.baseURL+"/doc/get_proj_documents",method:"post",headers:{"Content-Type":"application/json",Authorization:C.token},data:{proj_id:g.proj_id},transformRequest:[function(e,n){return JSON.stringify(e)}]}).then(function(e){var n,d,f,a,m,r,c,D,E,B,l,T;for(console.log("responseDocs",e);i.value.length!=0;)i.value.pop();if((n=e.data)!=null&&n.success){for(let w=0;w<((d=e.data)==null?void 0:d.count);w++)console.log("onePush"),i.value.push({label:(a=(f=e.data)==null?void 0:f.documents[w])==null?void 0:a.document_name,value:(r=(m=e.data)==null?void 0:m.documents[w])==null?void 0:r.document_id});t&&(_.id=(D=(c=e.data)==null?void 0:c.documents[0])==null?void 0:D.document_id,_.name=(B=(E=e.data)==null?void 0:E.documents[0])==null?void 0:B.document_name,j.value=(T=(l=e.data)==null?void 0:l.documents[0])==null?void 0:T.document_name,q())}})},M=s("");return(t,e)=>{const n=p("n-input"),d=p("n-button"),f=p("n-modal"),a=p("n-gi"),m=p("n-image"),r=p("n-select"),c=p("n-space"),D=p("n-grid"),E=p("router-view"),B=p("n-layout");return _e(),ie("div",null,[o(f,{show:x.value,"onUpdate:show":e[1]||(e[1]=l=>x.value=l),style:{width:"500px"},class:"custom-card",preset:"card",title:" \u8BF7\u8F93\u5165\u6587\u6863\u540D\u5B57",size:"huge",bordered:!1},{"header-extra":u(()=>[fe]),footer:u(()=>[o(d,{onClick:Y},{default:u(()=>[me]),_:1})]),default:u(()=>[o(n,{value:M.value,"onUpdate:value":e[0]||(e[0]=l=>M.value=l)},null,8,["value"])]),_:1},8,["show"]),P("div",null,[o(D,{cols:100},{default:u(()=>[o(a),o(a,{span:"3"},{default:u(()=>[o(m,{"preview-disabled":"",src:"svg\\doc\\\u5F62\u72B6 (1).svg"})]),_:1}),o(a,{span:"13"},{default:u(()=>[ge]),_:1}),o(a,{span:"8"}),o(a,{span:"15"},{default:u(()=>[o(c,{vertical:""},{default:u(()=>[o(r,{value:N.value,"onUpdate:value":[e[2]||(e[2]=l=>N.value=l),X],options:O.value,remote:"",loading:b.value,placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",class:"choose selectP"},null,8,["value","options","loading"])]),_:1})]),_:1}),o(a),o(a,{span:"15"},{default:u(()=>[o(c,{vertical:""},{default:u(()=>[o(r,{value:j.value,"onUpdate:value":[e[3]||(e[3]=l=>j.value=l),q],options:i.value,remote:"",loading:b.value,placeholder:"\u8BF7\u9009\u6587\u6863",class:"choose selectP"},null,8,["value","options","loading"])]),_:1})]),_:1}),o(a,{span:"1"}),o(a,{span:"7"},{default:u(()=>[o(c,null,{default:u(()=>[o(d,{round:"",type:"info",strong:"",disabled:K.value,onClick:[Z,e[4]||(e[4]=()=>{x.value=!0})]},{default:u(()=>[he]),_:1},8,["disabled"])]),_:1})]),_:1}),o(a,{span:"1"}),o(a,{span:"10"},{default:u(()=>[o(c,{vertical:""},{default:u(()=>[o(r,{value:S.value,"onUpdate:value":[e[5]||(e[5]=l=>S.value=l),W],options:G,loading:H.value,placeholder:"\u66F4\u591A\u6A21\u677F",class:"choose selectP"},null,8,["value","loading"])]),_:1})]),_:1}),o(a,{span:"1"}),o(a,{span:"10"},{default:u(()=>[o(c,{vertical:""},{default:u(()=>[o(r,{value:h.value,"onUpdate:value":[e[6]||(e[6]=l=>h.value=l),Q],options:U.value,placeholder:"\u5BFC\u51FA\u6587\u6863",class:"choose selectP"},null,8,["value","options"])]),_:1})]),_:1})]),_:1})]),je,o(B,null,{default:u(()=>[o(E)]),_:1})])}}});var Ce=$(be,[["__scopeId","data-v-17d8c1cf"]]);export{Ce as default};
