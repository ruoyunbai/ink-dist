import{_ as I,a as O,M as T,O as V,k as J,P,j as G,r as u,b as $,D as H,o as K,l as f,c as d,f as Q,g as t,w as s,q as W,s as X,e as Y,i as j,h as Z}from"./index.1049e568.js";const ee=m=>(W("data-v-0f01bc28"),m=m(),X(),m),oe=j(" \u53D6\u6D88 "),te=j("\u786E\u5B9A"),ae=j("\u65B0\u5EFA\u6587\u6863"),ne=ee(()=>Z("br",null,null,-1)),se=O({setup(m){const N=T(),x=V(),S=J(),C=P(),b=G(),l=u([]),w=u([]);u(!1),u(-1);const g=u(null),B=u(null),h=u(!0),y=u(!1),U=u(!1),p=$({id:-1,name:""}),k=()=>{},R=()=>{p.id=Number(g.value),console.log("docid",p.id);for(let e=0;e<l.value.length;e++)g.value==l.value[e].value&&(console.log("LABEL",l.value[e].label),p.name=String(l.value[e].label));N.name==="docContent"?x.push({name:"docContent0",params:p}):x.push({name:"docContent",params:p})},A=()=>{f({url:f.defaults.baseURL+"/doc/upload_document",method:"post",headers:{"Content-Type":"application/json",Authorization:b.token},data:{content:"",document_name:p.name,proj_id:1,document_id:p.id},transformRequest:[function(e,o){let a=JSON.stringify(e);return console.log(a),a}]}).then(function(e){var o;console.log("response",e),console.log(e.data),(o=e.data)!=null&&o.success})};H(()=>{}),K(()=>{F(),D()});const F=()=>{h.value=!0,C.id,f({url:f.defaults.baseURL+"/proj/get_proj_all",method:"post",headers:{"Content-Type":"application/json",Authorization:b.token},data:{group_id:C.id,is_desc:!0,order_by:0},transformRequest:[function(e,o){let a=JSON.stringify(e);return console.log(a),a}]}).then(function(e){var o,a,r,v,i,c;for(console.log("response",e),console.log(e.data);l.value.length!=0;)l.value.pop();if((o=e.data)!=null&&o.success){for(let n=0;n<((a=e.data)==null?void 0:a.count);n++)w.value.push({label:(v=(r=e.data)==null?void 0:r.projs[n])==null?void 0:v.proj_name,value:(c=(i=e.data)==null?void 0:i.projs[n])==null?void 0:c.proj_id});h.value=!1}else S.error("\u8FD8\u6CA1\u6709\u9879\u76EE")})},D=()=>{f({url:f.defaults.baseURL+"/doc/get_proj_documents",method:"post",headers:{"Content-Type":"application/json",Authorization:b.token},data:{proj_id:1},transformRequest:[function(e,o){let a=JSON.stringify(e);return console.log(a),a}]}).then(function(e){var o,a,r,v,i,c;for(console.log("response",e),console.log(e.data);l.value.length!=0;)l.value.pop();if((o=e.data)!=null&&o.success)for(let n=0;n<((a=e.data)==null?void 0:a.count);n++)l.value.push({label:(v=(r=e.data)==null?void 0:r.documents[n])==null?void 0:v.document_name,value:(c=(i=e.data)==null?void 0:i.documents[n])==null?void 0:c.document_id})})},E=u("");return(e,o)=>{const a=d("n-input"),r=d("n-button"),v=d("n-modal"),i=d("n-select"),c=d("n-space"),n=d("n-gi"),L=d("n-grid"),M=d("n-card"),q=d("router-view"),z=d("n-layout");return Y(),Q("div",null,[t(v,{show:y.value,"onUpdate:show":o[1]||(o[1]=_=>y.value=_),class:"custom-card",preset:"card",title:" \u8BF7\u8F93\u5165\u6587\u6863\u540D\u5B57",size:"huge",bordered:!1},{"header-extra":s(()=>[oe]),footer:s(()=>[t(r,{onClick:k},{default:s(()=>[te]),_:1})]),default:s(()=>[t(a,{value:E.value,"onUpdate:value":o[0]||(o[0]=_=>E.value=_)},null,8,["value"])]),_:1},8,["show"]),t(M,{bordered:!1},{default:s(()=>[t(L,{cols:20},{default:s(()=>[t(n,{span:"3"},{default:s(()=>[t(c,{vertical:""},{default:s(()=>[t(i,{value:B.value,"onUpdate:value":[o[2]||(o[2]=_=>B.value=_),o[3]||(o[3]=_=>D())],options:w.value,remote:"",loading:h.value,placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",class:"choose"},null,8,["value","options","loading"])]),_:1})]),_:1}),t(n,{span:"3"},{default:s(()=>[t(c,{vertical:""},{default:s(()=>[t(i,{value:g.value,"onUpdate:value":[o[4]||(o[4]=_=>g.value=_),R],options:l.value,remote:"",loading:h.value,placeholder:"\u8BF7\u9009\u6587\u6863",class:"choose"},null,8,["value","options","loading"])]),_:1})]),_:1}),t(n,{span:"3"}),t(n,{span:"2"},{default:s(()=>[t(c,null,{default:s(()=>[t(r,{type:"warning",strong:"",secondary:"",disabled:U.value,onClick:[A,o[5]||(o[5]=()=>{y.value=!0})]},{default:s(()=>[ae]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),ne,t(z,null,{default:s(()=>[t(q)]),_:1})])}}});var ue=I(se,[["__scopeId","data-v-0f01bc28"]]);export{ue as default};
